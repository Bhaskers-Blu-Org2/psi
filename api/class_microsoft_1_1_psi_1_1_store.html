<!-- Copyright (c) Microsoft Corporation. All rights reserved.
     Licensed under the MIT License. -->
<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta name="generator" content="Doxygen 1.8.14" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Platform for Situated Intelligence: Microsoft.Psi.Store Class Reference</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <link href="customdoxygen.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
    <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
            <table cellspacing="0" cellpadding="0">
                <tbody>
                    <tr style="height: 56px;">
                        <td id="projectalign" style="padding-left: 0.5em;">
                            <div id="projectname">Platform for Situated Intelligence</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- end header part --><!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_microsoft.html">Microsoft</a></li><li class="navelem"><a class="el" href="namespace_microsoft_1_1_psi.html">Psi</a></li><li class="navelem"><a class="el" href="class_microsoft_1_1_psi_1_1_store.html">Store</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_microsoft_1_1_psi_1_1_store-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Microsoft.Psi.Store Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides static methods to access multi-stream stores.  
 <a href="class_microsoft_1_1_psi_1_1_store.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:af445066b425d592506950f389474acf6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_microsoft_1_1_psi_1_1_data_1_1_exporter.html">Exporter</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_microsoft_1_1_psi_1_1_store.html#af445066b425d592506950f389474acf6">Create</a> (<a class="el" href="class_microsoft_1_1_psi_1_1_pipeline.html">Pipeline</a> pipeline, string name, string rootPath, bool createSubdirectory=true, <a class="el" href="class_microsoft_1_1_psi_1_1_serialization_1_1_known_serializers.html">KnownSerializers</a> serializers=null)</td></tr>
<tr class="memdesc:af445066b425d592506950f389474acf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new multi-stream store and returns an Exporter instance which can be used to write streams to this store.  <a href="#af445066b425d592506950f389474acf6">More...</a><br /></td></tr>
<tr class="separator:af445066b425d592506950f389474acf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33a73e2fb58f468e2c2252f815c15cd2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_microsoft_1_1_psi_1_1_data_1_1_importer.html">Importer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_microsoft_1_1_psi_1_1_store.html#a33a73e2fb58f468e2c2252f815c15cd2">Open</a> (<a class="el" href="class_microsoft_1_1_psi_1_1_pipeline.html">Pipeline</a> pipeline, string name, string rootPath)</td></tr>
<tr class="memdesc:a33a73e2fb58f468e2c2252f815c15cd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a multi-stream store for read and returns an Importer instance which can be used to inspect the store and open the streams. The store metadata is available immediately after this call (before the pipeline is running) via the <a class="el" href="class_microsoft_1_1_psi_1_1_data_1_1_importer.html#a29ffcec9197319088b9609e7ab363059" title="Gets the metadata of all the storage streams in this store. ">Importer.AvailableStreams</a> property.  <a href="#a33a73e2fb58f468e2c2252f815c15cd2">More...</a><br /></td></tr>
<tr class="separator:a33a73e2fb58f468e2c2252f815c15cd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d76e8820de3b5b1b1cbc53788ddd5d5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; TIn &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_microsoft_1_1_psi_1_1_store.html#a5d76e8820de3b5b1b1cbc53788ddd5d5">Write&lt; TIn &gt;</a> (this <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; TIn &gt; source, string name, <a class="el" href="class_microsoft_1_1_psi_1_1_data_1_1_exporter.html">Exporter</a> writer, bool largeMessages=false, <a class="el" href="class_microsoft_1_1_psi_1_1_delivery_policy.html">DeliveryPolicy</a> policy=null)</td></tr>
<tr class="memdesc:a5d76e8820de3b5b1b1cbc53788ddd5d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the specified stream to a multi-stream store.  <a href="#a5d76e8820de3b5b1b1cbc53788ddd5d5">More...</a><br /></td></tr>
<tr class="separator:a5d76e8820de3b5b1b1cbc53788ddd5d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e07abb092e5148b7c6b46100be3220"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_microsoft_1_1_psi_1_1_store.html#a65e07abb092e5148b7c6b46100be3220">Exists</a> (string name, string path)</td></tr>
<tr class="memdesc:a65e07abb092e5148b7c6b46100be3220"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether the specified store file exists.  <a href="#a65e07abb092e5148b7c6b46100be3220">More...</a><br /></td></tr>
<tr class="separator:a65e07abb092e5148b7c6b46100be3220"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4250a120fb9f739002762a0c2d24f67d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_microsoft_1_1_psi_1_1_store.html#a4250a120fb9f739002762a0c2d24f67d">TryGetMetadata&lt; T &gt;</a> (<a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; T &gt; source, out <a class="el" href="class_microsoft_1_1_psi_1_1_psi_stream_metadata.html">PsiStreamMetadata</a> metadata)</td></tr>
<tr class="memdesc:a4250a120fb9f739002762a0c2d24f67d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the metadata associated with the specified stream, if the stream is persisted to a store.  <a href="#a4250a120fb9f739002762a0c2d24f67d">More...</a><br /></td></tr>
<tr class="separator:a4250a120fb9f739002762a0c2d24f67d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c3ab2e317d659ec395ee2e362827cf5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_microsoft_1_1_psi_1_1_store.html#a5c3ab2e317d659ec395ee2e362827cf5">TryGetMetadata</a> (<a class="el" href="class_microsoft_1_1_psi_1_1_pipeline.html">Pipeline</a> pipeline, string streamName, out <a class="el" href="class_microsoft_1_1_psi_1_1_psi_stream_metadata.html">PsiStreamMetadata</a> metadata)</td></tr>
<tr class="memdesc:a5c3ab2e317d659ec395ee2e362827cf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the metadata associated with the specified stream, if the stream is persisted to a store.  <a href="#a5c3ab2e317d659ec395ee2e362827cf5">More...</a><br /></td></tr>
<tr class="separator:a5c3ab2e317d659ec395ee2e362827cf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c9177b3d77764b24b8946fbb8c2ec37"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; <a class="el" href="class_microsoft_1_1_psi_1_1_message.html">Message</a>&lt; <a class="el" href="class_microsoft_1_1_psi_1_1_common_1_1_buffer_reader.html">BufferReader</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_microsoft_1_1_psi_1_1_store.html#a7c9177b3d77764b24b8946fbb8c2ec37">Serialize&lt; T &gt;</a> (this <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; T &gt; source, <a class="el" href="class_microsoft_1_1_psi_1_1_serialization_1_1_known_serializers.html">KnownSerializers</a> serializers=null)</td></tr>
<tr class="memdesc:a7c9177b3d77764b24b8946fbb8c2ec37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serializes the source stream, preserving the envelope.  <a href="#a7c9177b3d77764b24b8946fbb8c2ec37">More...</a><br /></td></tr>
<tr class="separator:a7c9177b3d77764b24b8946fbb8c2ec37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab794eae09a481d12f6defebe7977d685"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_microsoft_1_1_psi_1_1_store.html#ab794eae09a481d12f6defebe7977d685">Deserialize&lt; T &gt;</a> (this <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; <a class="el" href="class_microsoft_1_1_psi_1_1_message.html">Message</a>&lt; <a class="el" href="class_microsoft_1_1_psi_1_1_common_1_1_buffer_reader.html">BufferReader</a> &gt;&gt; source, <a class="el" href="class_microsoft_1_1_psi_1_1_serialization_1_1_known_serializers.html">KnownSerializers</a> serializers=null, T reusableInstance=default(T))</td></tr>
<tr class="memdesc:ab794eae09a481d12f6defebe7977d685"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deserializes data from a stream of Message{BufferReader}.  <a href="#ab794eae09a481d12f6defebe7977d685">More...</a><br /></td></tr>
<tr class="separator:ab794eae09a481d12f6defebe7977d685"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides static methods to access multi-stream stores. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af445066b425d592506950f389474acf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af445066b425d592506950f389474acf6">&#9670;&nbsp;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_microsoft_1_1_psi_1_1_data_1_1_exporter.html">Exporter</a> Microsoft.Psi.Store.Create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_microsoft_1_1_psi_1_1_pipeline.html">Pipeline</a>&#160;</td>
          <td class="paramname"><em>pipeline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>rootPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>createSubdirectory</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_microsoft_1_1_psi_1_1_serialization_1_1_known_serializers.html">KnownSerializers</a>&#160;</td>
          <td class="paramname"><em>serializers</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new multi-stream store and returns an Exporter instance which can be used to write streams to this store. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>The <a class="el" href="class_microsoft_1_1_psi_1_1_pipeline.html" title="Represents a graph of components and controls scheduling and message passing. ">Pipeline</a> that owns the Exporter</td></tr>
    <tr><td class="paramname">name</td><td>The name of the store to create</td></tr>
    <tr><td class="paramname">rootPath</td><td>The path to use. If null, an in-memory store is created.</td></tr>
    <tr><td class="paramname">createSubdirectory</td><td>Indicates whether to create a numbered subdirectory for each execution of the pipeline.</td></tr>
    <tr><td class="paramname">serializers</td><td>An optional collection of custom serializers to use instead of the default ones</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An Exporter instance that can be used to write streams.</dd></dl>
<p>The Exporter maintains a collection of serializers it knows about, which it uses to serialize the data it writes to the store. By default, the Exporter derives the correct serializers from the type argument passed to <a class="el" href="class_microsoft_1_1_psi_1_1_data_1_1_exporter.html#ace27a54b2ff96054cee469364c3a998c" title="Writes the messages from the specified stream to the matching storage stream in this store...">Exporter.Write&lt;T&gt;(Emitter&lt;T&gt;, string, bool, DeliveryPolicy)</a>. In other words, for the most part simply knowing the stream type is sufficient to determine all the types needed to serialize the messages in the stream. Use the KnownSerializers parameter to override the default behavior and provide a custom set of serializers. </p>

</div>
</div>
<a id="ab794eae09a481d12f6defebe7977d685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab794eae09a481d12f6defebe7977d685">&#9670;&nbsp;</a></span>Deserialize&lt; T &gt;()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt;T&gt; Microsoft.Psi.Store.Deserialize&lt; T &gt; </td>
          <td>(</td>
          <td class="paramtype">this <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; <a class="el" href="class_microsoft_1_1_psi_1_1_message.html">Message</a>&lt; <a class="el" href="class_microsoft_1_1_psi_1_1_common_1_1_buffer_reader.html">BufferReader</a> &gt;&gt;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_microsoft_1_1_psi_1_1_serialization_1_1_known_serializers.html">KnownSerializers</a>&#160;</td>
          <td class="paramname"><em>serializers</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>reusableInstance</em> = <code>default(T)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deserializes data from a stream of Message{BufferReader}. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>The type of data expected after deserialization</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The stream containing the serialized data</td></tr>
    <tr><td class="paramname">serializers</td><td>An optional collection of known types to use</td></tr>
    <tr><td class="paramname">reusableInstance</td><td>An optional preallocated instance ot use as a buffer. This parameter is required when deserializing Shared&lt;T&gt; instances if the deserializer is expected to use a SharedPool&lt;T&gt;</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A stream of messages of type T, with their original envelope</dd></dl>

</div>
</div>
<a id="a65e07abb092e5148b7c6b46100be3220"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65e07abb092e5148b7c6b46100be3220">&#9670;&nbsp;</a></span>Exists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool Microsoft.Psi.Store.Exists </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicates whether the specified store file exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the store to check.</td></tr>
    <tr><td class="paramname">path</td><td>The path of the store to check.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the store exists.</dd></dl>

</div>
</div>
<a id="a33a73e2fb58f468e2c2252f815c15cd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33a73e2fb58f468e2c2252f815c15cd2">&#9670;&nbsp;</a></span>Open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_microsoft_1_1_psi_1_1_data_1_1_importer.html">Importer</a> Microsoft.Psi.Store.Open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_microsoft_1_1_psi_1_1_pipeline.html">Pipeline</a>&#160;</td>
          <td class="paramname"><em>pipeline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>rootPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Opens a multi-stream store for read and returns an Importer instance which can be used to inspect the store and open the streams. The store metadata is available immediately after this call (before the pipeline is running) via the <a class="el" href="class_microsoft_1_1_psi_1_1_data_1_1_importer.html#a29ffcec9197319088b9609e7ab363059" title="Gets the metadata of all the storage streams in this store. ">Importer.AvailableStreams</a> property. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>The <a class="el" href="class_microsoft_1_1_psi_1_1_pipeline.html" title="Represents a graph of components and controls scheduling and message passing. ">Pipeline</a> that owns the Importer</td></tr>
    <tr><td class="paramname">name</td><td>The name of the store to open (the same as the catalog file name)</td></tr>
    <tr><td class="paramname">rootPath</td><td>The path to the store. This can be one of:<ul>
<li>a full path to a directory containing the store</li>
<li>a root path containing one or more versions of the store, each in its own subdirectory, in which case the latest store is opened.</li>
<li>a null string, in which case an in-memory store is opened. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An Importer instance that can be used to open streams and read messages.</dd></dl>
<p>The Importer maintains a collection of serializers it knows about, which it uses to deserialize the data it reads form the store. By default, the Importer derives the correct serializers from the type argument passed to <a class="el" href="class_microsoft_1_1_psi_1_1_data_1_1_importer.html#ab422cf7e0fb0afb2f90b35ee7976cb7c" title="Opens the specified storage stream for reading and returns a stream instance that can be used to cons...">Importer.OpenStream&lt;T&gt;(string, T)</a>. In other words, for the most part simply knowing the stream type is sufficient to determine all the types needed to deserialize the messages in the stream. However, there are two cases when this automatic behavior might not work:</p><ol type="1">
<li>When one of the required types changed between the version used to serialize the file and the current version, in a way that breaks versioning rules. Use the <a class="el" href="class_microsoft_1_1_psi_1_1_serialization_1_1_known_serializers.html#a39d1f435ff7000a7dd465de98d319496" title="Registers type T with the specified contract name. Use this overload to deserialize data persisted be...">KnownSerializers.Register&lt;T&gt;(string)</a> method to remap the name of the old type to a new, compatible type.</li>
<li>When the declared type of a field is different than the actual value assigned to it (polymorphic fields) and the value assigned is of a type that implements the DataContract serialization rules. In this case, use the <a class="el" href="class_microsoft_1_1_psi_1_1_serialization_1_1_known_serializers.html#a341685c7a34b94465e91cac834f11d08" title="Registers a type that the serialization system would not be able find or resolve. Use this overload w...">KnownSerializers.Register&lt;T&gt;()</a> method to let the serialization system know which compatible concrete type to use for that DataContract name. </li>
</ol>

</div>
</div>
<a id="a7c9177b3d77764b24b8946fbb8c2ec37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c9177b3d77764b24b8946fbb8c2ec37">&#9670;&nbsp;</a></span>Serialize&lt; T &gt;()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt;<a class="el" href="class_microsoft_1_1_psi_1_1_message.html">Message</a>&lt;<a class="el" href="class_microsoft_1_1_psi_1_1_common_1_1_buffer_reader.html">BufferReader</a>&gt; &gt; Microsoft.Psi.Store.Serialize&lt; T &gt; </td>
          <td>(</td>
          <td class="paramtype">this <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; T &gt;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_microsoft_1_1_psi_1_1_serialization_1_1_known_serializers.html">KnownSerializers</a>&#160;</td>
          <td class="paramname"><em>serializers</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serializes the source stream, preserving the envelope. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>The type of data to serialize</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The source stream generating the data to serialize</td></tr>
    <tr><td class="paramname">serializers</td><td>An optional collection of known types to use</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A stream of Message{Message{BufferReader}}, where the inner Message object preserves the original envelope of the message received by this operator.</dd></dl>

</div>
</div>
<a id="a5c3ab2e317d659ec395ee2e362827cf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c3ab2e317d659ec395ee2e362827cf5">&#9670;&nbsp;</a></span>TryGetMetadata()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool Microsoft.Psi.Store.TryGetMetadata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_microsoft_1_1_psi_1_1_pipeline.html">Pipeline</a>&#160;</td>
          <td class="paramname"><em>pipeline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>streamName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">out <a class="el" href="class_microsoft_1_1_psi_1_1_psi_stream_metadata.html">PsiStreamMetadata</a>&#160;</td>
          <td class="paramname"><em>metadata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the metadata associated with the specified stream, if the stream is persisted to a store. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>The current pipeline</td></tr>
    <tr><td class="paramname">streamName</td><td>The name of the stream to retrieve metadata about</td></tr>
    <tr><td class="paramname">metadata</td><td>Upon return, this parameter contains the metadata associated with the stream, or null if the stream is not persisted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the stream is persisted to a store, false otherwise</dd></dl>

</div>
</div>
<a id="a4250a120fb9f739002762a0c2d24f67d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4250a120fb9f739002762a0c2d24f67d">&#9670;&nbsp;</a></span>TryGetMetadata&lt; T &gt;()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool <a class="el" href="class_microsoft_1_1_psi_1_1_store.html#a5c3ab2e317d659ec395ee2e362827cf5">Microsoft.Psi.Store.TryGetMetadata</a>&lt; T &gt; </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; T &gt;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">out <a class="el" href="class_microsoft_1_1_psi_1_1_psi_stream_metadata.html">PsiStreamMetadata</a>&#160;</td>
          <td class="paramname"><em>metadata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the metadata associated with the specified stream, if the stream is persisted to a store. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>The type of stream messages</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The stream to retrieve metadata about</td></tr>
    <tr><td class="paramname">metadata</td><td>Upon return, this parameter contains the metadata associated with the stream, or null if the stream is not persisted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the stream is persisted to a store, false otherwise</dd></dl>

</div>
</div>
<a id="a5d76e8820de3b5b1b1cbc53788ddd5d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d76e8820de3b5b1b1cbc53788ddd5d5">&#9670;&nbsp;</a></span>Write&lt; TIn &gt;()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt;TIn&gt; Microsoft.Psi.Store.Write&lt; TIn &gt; </td>
          <td>(</td>
          <td class="paramtype">this <a class="el" href="interface_microsoft_1_1_psi_1_1_i_producer.html">IProducer</a>&lt; TIn &gt;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_microsoft_1_1_psi_1_1_data_1_1_exporter.html">Exporter</a>&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>largeMessages</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_microsoft_1_1_psi_1_1_delivery_policy.html">DeliveryPolicy</a>&#160;</td>
          <td class="paramname"><em>policy</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes the specified stream to a multi-stream store. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">TIn</td><td>The type of messages in the stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The source stream to write</td></tr>
    <tr><td class="paramname">name</td><td>The name of the persisted stream.</td></tr>
    <tr><td class="paramname">writer</td><td>The store writer, created by e.g. <a class="el" href="class_microsoft_1_1_psi_1_1_store.html#af445066b425d592506950f389474acf6" title="Creates a new multi-stream store and returns an Exporter instance which can be used to write streams ...">Store.Create(Pipeline, string, string, bool, KnownSerializers)</a></td></tr>
    <tr><td class="paramname">largeMessages</td><td>Indicates whether the stream contains large messages (typically &gt;4k). If true, the messages will be written to the large message file.</td></tr>
    <tr><td class="paramname">policy</td><td>An optional delivery policy</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The input stream</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- Copyright (c) Microsoft Corporation. All rights reserved.
     Licensed under the MIT License. -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer" />
<address class="footer">
  <small>
    <a href="https://go.microsoft.com/fwlink/?LinkId=521839">Privacy & Cookies</a>&nbsp;|&nbsp;
    <a href="https://go.microsoft.com/fwlink/?LinkId=246338">Terms Of Use</a>&nbsp;|&nbsp;
    <a href="https://go.microsoft.com/fwlink/?LinkId=506942">Trademarks</a>&nbsp;|&nbsp; &nbsp;&#9400;&nbsp;Microsoft
    <img class="footer" src="MSLogoGreySmall.png" alt="Microsoft" Height="40" /> Generated by&nbsp;
    <a href="http://www.doxygen.org/index.html">
      <img class="footer" src="doxygen.png" alt="doxygen" />
    </a>1.8.14
  </small>
</address>
</body>
</html>